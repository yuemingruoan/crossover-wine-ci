[require]
shader model >= 6.0

[uav 0]
format r32g32b32a32-float
size(buffer, 12)

0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0

[pixel shader]
uniform int4 i;
RWBuffer<float4> u;

float4 main() : sv_target
{
    u[i.x] = float4(0.5, 0.625, 0.75, 0.0);
    u[i.x + 1].x = -1.25;
    float4 f = u[i.y];
    return float4(f.xyz, u[i.y + 1].x);
}

[test]
uniform 0 int4 0 0 0 0
draw quad
probe (0, 0) rgba (0.5, 0.625, 0.75, -1.25)

[uav 0]
format r32-float
size(buffer, 12)

0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0

[pixel shader]
uniform int4 i;
RWBuffer<float> u;

float4 main() : sv_target
{
    u[i.x] = 0.625;
    u[i.x + 1] = 0.75;
    u[i.x + 2] = -1.25;
    float2 f = float2(u[i.y], u[i.y + 1]);
    return float4(f, u[i.y + 2], 0);
}

[test]
uniform 0 int4 0 0 0 0
draw quad
probe (0, 0) rgba (0.625, 0.75, -1.25, 0)
